<!DOCTYPE html>
<html>
	<head>
		<!--- 

			bootstrap css is auto injected by the parent frame

			<link id="cssChanges" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"> 

		---->
		<meta charset="utf-8" />
		<title>Import for Etherscan</title>
	</head>
	<body>

		<div class="container">
			<div class="card mb-3 mt-2">
				<div class="card-body">
					<div class="row mb-3">
						<div class="col-sm-12">
							<h6>
								Status
							</h6> 
							<div class="d-flex align-items-center">  
								<small> 
									Running
								</small>  	
								<div class="spinner-border ms-auto ml-3" style="width: 1.2rem; height: 1.2rem;" role="status" aria-hidden="true">
								</div>	
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12">
							<h6>
								Task 
							</h6>  
							<small> 
								Waiting on API cooldown
							</small>  		
						</div>
					</div>
				</div>
			</div>
				

			<h6 class="mb-3 ml-1 mt-1">
				Import a Contract
			</h6>

			<div class="card mb-3">
				<div class="card-header">
					<ul class="nav nav-pills card-header-pills nav-fill">
						<li class="nav-item">
							<a class="nav-link bg-secondary active btn-sm" href="#" onclick="event.preventDefault(); ImportContractUI.import.setActive(0)" id="importContractImportTab">
								Import
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link btn-sm" onclick="event.preventDefault(); ImportContractUI.import.setActive(1)" href="#" id="importContractSettingsTab">
								Settings
							</a>
						</li>
					</ul>
				</div>
				<div class="card-body" id="importContractCardBodyContent">

				</div>
			</div>


			<h6 class="mb-3 ml-1 mt-1">Contracts for Import</h6>
	
			<div class="accordion" id="accordionExample">

			</div>

		</div>
		
		<script src="./js/remix/plugin/plugin_iframe.js"></script>

		<script src="./js/EtherscanContractImportPlugin/ContractRequest.js"></script>
		<script src="./js/EtherscanContractImportPlugin/EtherscanRequestsWorker.js"></script>
		<script src="./js/EtherscanContractImportPlugin/HTMLElement.js"></script>
		<script src="./js/EtherscanContractImportPlugin/ImportContractUI.js"></script>
		<script src="./js/EtherscanContractImportPlugin/ImportEtherscanContractPlugin.js"></script>
		<script src="./js/EtherscanContractImportPlugin/Utility.js"></script>

		<script>

			// the import tab is added to the page with javascript
			window.addEventListener('load', function () {

				ImportContractUI.import.setActive(0);

			});

			// otherwise, i would have to write stuff to change the default page when 
			// not being loaded in a remix client.
			if(!inIframe()) {

				window.location.replace("https://remix.ethereum.org");

			}

			let client = plugin_iframe.createClient();
			

			// this is the plugin that the UI uses to make requests. i just attached it to the ui as the ui is acting
			// like the window or document of the page.
			// 
			// client, network, apiKey, storageLocation, retryAttemptsOnFailure
			ImportContractUI.plugin = new ImportEtherscanContractPlugin(client, ImportEtherscanContractPlugin.networks.ETHEREUM_MAINNET, "", "/etherscan/contracts", 3, 5000);
																	//(remixClient, defaultNetwork, defaultAPIKey, defaultStorageLocation, defaultRetryAttempts, waitBetweenRequests, workerUICallback
		</script>


		<script src="./js/jquery/jquery-3.3.1.slim.min.js"></script>
		<script src="./js/npm/popper.js@1.14.3/dist/umd/popper.min.js"></script>
		<script src="./js/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>

	</body>
</html>